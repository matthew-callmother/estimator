{
  "meta": {
    "version": "v3-routing",
    "lock_hours": 72,
    "currency": "USD",
    "start_id": "type"
  },
  "pricing": {
    "round_to": 25,
    "exact_mode": "mid"
  },
  "lookup": {
    "municipalities_url": "https://matthew-callmother.github.io/estimator/municipalities-dfw.json",
    "match_on": "addr_city",
    "write_to": {
      "permit_fee_usd": "permit_fee_usd",
      "expansion_tank_required": "expansion_tank_required"
    },
    "expansion_tank_addon": 350
  },
  "questions": [
    {
      "id": "type",
      "type": "single_select",
      "title": "What kind of water heater do you have?",
      "subtitle": "This sets the baseline.",
      "tooltip": "If you\u2019re unsure, pick the closest match.",
      "next": "address_gate",
      "options": [
        {
          "value": "tank",
          "label": "Tank",
          "image_url": "https://cdn.prod.website-files.com/678144dfb4c536263e714199/6959542f801a71c999749c88_conventional.png",
          "price": {
            "low": 3400,
            "high": 4200
          },
          "next": "tank_fuel"
        },
        {
          "value": "tankless",
          "label": "Tankless",
          "image_url": "https://cdn.prod.website-files.com/678144dfb4c536263e714199/695954b2a011b846bd420fac_tankless-wireframe.png",
          "price": {
            "low": 6400,
            "high": 7900
          },
          "next": "tankless_fuel"
        }
      ]
    },
    {
      "id": "tank_fuel",
      "type": "single_select",
      "title": "What fuel is your tank water heater?",
      "subtitle": "Fuel affects hookups and parts.",
      "next": "location",
      "options": [
        {
          "value": "gas",
          "label": "Gas",
          "price": {
            "low": 0,
            "high": 0
          }
        },
        {
          "value": "electric",
          "label": "Electric",
          "price": {
            "low": 0,
            "high": 0
          }
        },
        {
          "value": "not_sure",
          "label": "Not sure",
          "price": {
            "low": 200,
            "high": 350
          }
        }
      ]
    },
    {
      "id": "tankless_fuel",
      "type": "single_select",
      "title": "What fuel is your tankless water heater?",
      "subtitle": "Fuel affects venting and electrical work.",
      "next": "location",
      "options": [
        {
          "value": "gas",
          "label": "Gas",
          "price": {
            "low": 0,
            "high": 0
          }
        },
        {
          "value": "electric",
          "label": "Electric",
          "price": {
            "low": 0,
            "high": 0
          }
        },
        {
          "value": "not_sure",
          "label": "Not sure",
          "price": {
            "low": 250,
            "high": 450
          }
        }
      ]
    },
    {
      "id": "location",
      "type": "single_select",
      "title": "Where is the water heater installed?",
      "subtitle": "Access and safety change install time.",
      "next": "access",
      "options": [
        {
          "value": "garage",
          "label": "Garage",
          "price": {
            "low": 0,
            "high": 0
          }
        },
        {
          "value": "attic",
          "label": "Attic",
          "price": {
            "low": 450,
            "high": 650
          }
        },
        {
          "value": "closet",
          "label": "Closet",
          "price": {
            "low": 300,
            "high": 450
          }
        },
        {
          "value": "other",
          "label": "Other",
          "price": {
            "low": 350,
            "high": 550
          }
        }
      ]
    },
    {
      "id": "access",
      "type": "single_select",
      "title": "How easy is the access to the heater?",
      "subtitle": "Tight spaces take longer and need more care.",
      "next": "urgency",
      "options": [
        {
          "value": "easy",
          "label": "Easy",
          "price": {
            "low": 0,
            "high": 0
          }
        },
        {
          "value": "tight",
          "label": "Tight",
          "price": {
            "low": 350,
            "high": 550
          }
        },
        {
          "value": "not_sure",
          "label": "Not sure",
          "price": {
            "low": 200,
            "high": 300
          }
        }
      ]
    },
    {
      "id": "urgency",
      "type": "single_select",
      "title": "How soon do you need hot water back?",
      "subtitle": "Timing helps set expectations.",
      "next": "address_gate",
      "options": [
        {
          "value": "asap",
          "label": "ASAP (no hot water)",
          "price": {
            "low": 150,
            "high": 250
          }
        },
        {
          "value": "week",
          "label": "This week",
          "price": {
            "low": 0,
            "high": 0
          }
        },
        {
          "value": "month",
          "label": "1\u20134 weeks",
          "price": {
            "low": 0,
            "high": 0
          }
        }
      ]
    },
    {
      "id": "address_gate",
      "type": "form",
      "title": "Enter your address to get an exact price",
      "subtitle": "We use this to look up permit + municipality requirements.",
      "next": "permit_check",
      "fields": [
        {
          "id": "addr_street",
          "label": "Street",
          "input_type": "text",
          "required": true,
          "placeholder": "123 Main St",
          "autocomplete": "street-address"
        },
        {
          "id": "addr_city",
          "label": "City",
          "input_type": "text",
          "required": true,
          "placeholder": "Frisco",
          "autocomplete": "address-level2"
        },
        {
          "id": "addr_state",
          "label": "State",
          "input_type": "text",
          "required": true,
          "placeholder": "TX",
          "autocomplete": "address-level1",
          "pattern": "^[A-Za-z]{2}$",
          "pattern_msg": "Use a 2-letter state code (e.g., TX)"
        },
        {
          "id": "addr_zip",
          "label": "Zip",
          "input_type": "text",
          "required": true,
          "placeholder": "75034",
          "autocomplete": "postal-code",
          "pattern": "^\\d{5}(-\\d{4})?$",
          "pattern_msg": "Use a 5-digit ZIP"
        }
      ]
    },
    {
      "id": "permit_check",
      "type": "loading_lookup",
      "title": "Checking permit + code requirements\u2026",
      "subtitle": "Looking up your city\u2019s requirements.",
      "duration_ms": 2200,
      "next": "contact_gate"
    },
    {
      "id": "contact_gate",
      "type": "form",
      "title": "Lock in this estimate for 72 hours",
      "subtitle": "Where should we send it?",
      "next": "results",
      "fields": [
        {
          "id": "contact_name",
          "label": "Name",
          "input_type": "text",
          "required": true,
          "placeholder": "Full name",
          "autocomplete": "name"
        },
        {
          "id": "contact_phone",
          "label": "Phone",
          "input_type": "tel",
          "required": true,
          "type": "phone",
          "min_digits": 10,
          "placeholder": "(555) 555-5555",
          "autocomplete": "tel"
        },
        {
          "id": "contact_email",
          "label": "Email",
          "input_type": "email",
          "required": true,
          "type": "email",
          "placeholder": "you@email.com",
          "autocomplete": "email"
        }
      ]
    },
    {
      "id": "results",
      "type": "summary",
      "title": "Your estimate",
      "subtitle": "Review and submit.",
      "next": "submit"
    },
    {
      "id": "submit",
      "type": "submit",
      "title": "Submit",
      "subtitle": "We\u2019ll reach out to confirm details.",
      "submit_label": "Submit"
    }
  ],
  "result_copy": {
    "disclaimer": "Estimate is based on your selections. Final price can change if conditions differ on-site."
  }
}
